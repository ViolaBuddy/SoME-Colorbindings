<!DOCTYPE html>
<meta charset="UTF-8">
<html>
<head>
	<title>Colorbindings of Chess Variant Pieces</title>
	<link rel="stylesheet" type="text/css" href="indexstyle.css">
    <script type="text/javascript" src="chess-pieces.js"></script>
    <script type="text/javascript" src="index.js"></script>
    <script type="text/javascript" id="MathJax-script" async
    	src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js">
	</script>
</head>
<body>
<div id="left">
	<div id="boarddivcontrols"></div>
	<div id="boarddiv"></div>
</div>
<div id="right">
	<h1>Colorbindings of Chess Variant Pieces</h1>
	<!-- <details>: an openable/collapsable section. Within there, the <summary> tag is the label of the section -->
	<!-- <iframe src="basicgame.html" title="Clock Solitaire"></iframe>: include an external html file-->
	<!-- MathJax notation equation: \[\textrm{Prob}\left(k,n,p\right) = \binom{n}{k} p^k (1-p)^{n-k}\] -->
	<!-- MathJax notation inline: Also remember that \(\binom{n}{k}\) is how we notate n-choose-k -->
	<div class="content">
		<h2>Introduction</h2>
		<p>Chess is played by moving pieces around on a square grid. And this is true of xiangqi (Chinese chess) and shōgi (Japanese chess) too. And sure there's, like, strategy and stuff (and in Japanese chess, you can also re-deploy a captured unit), but we can skip that part today. Let's just talk about moving pieces.</p>
		<p>Each chess piece can move in its own unique way. For examples, knights move in a distinctive L-shaped way.  Despite this strange movement, knights can actually reach any square on the board, which I will state without proof here but you can try it for yourself on the left panel by pressing this button: <button>Knight</button></p>
		<p>But not all pieces can do that. Obviously, the pawn, as well as some similar pieces that can only move forwards in xiangqi and shōgi, cannot reach tiles behind it. But, also, there's the bishop, which can only reach half the squares on the board&dash;try it out and you'll immediately see why. <button>Pawn</button> <button>Promoted Soldier (Xiangqi)</button> <button>Lance (Shōgi)</button> <button>Laurel Horse (Shōgi)</button> <button>Bishop</button></p>
		<p>So today I'd like to explore this idea of pieces being only able to move to certain squares. And by "today" I mean "for literally a couple decades now." As a child, I was very into chess variants and thinking about funny new pieces and how they might move, and this idea of being stuck on certain tiles is a common idea among chess variant pieces (also called "fairy chess pieces"). Within this context, this idea is sometimes called <strong>colorbindings</strong>, named after the fact that on an ordinary chessboard, the bishop that starts on one color is stuck to that color and will never leave it. But it turns out that you can construct other pieces (like the alfil <button>Alfil</button>) that have a colorbinding other than just "the light squares" and "the dark squares," so a very natural question is: <strong>what are all the ways that a piece can be colorbound?</strong></p>
		<p>As a child, I never got very far with this question, but now let's see if we can't do a bit better.</p>
	</div>
	<div class="content">
		<h2>Formalizing What We Got</h2>
		<p>First of all, what can a chess variant piece be? People have done really wild and creative things with their chess variants. For example, you <em>could</em> arbitrarily choose a set of tiles on the board and be like "well my new piece, the gobbledygook, can teleport between any of those tiles." But if we allowed that sort of piece, then all possible ways of being colorbound is, trivially, possible, by just declaring any arbitrary set of tiles for the gobbledygook.</p>
		<p>But we can think back to the pieces from the three "canonical" types of chess I mentioned before. In almost all cases, the pieces' movements have translational symmetry: no matter where you are on the board, you can move to the same squares relative to yourself. So for our exploration today, let us only consider pieces whose movements are translationally symmetric.</p>
		<p>We do have to qualify this a little bit. Let's ignore the fact that you're not allowed to move off the edge of a board&mdash;that is, let's consider an infinite board. Let's also assume that no other pieces are on this infinite board&mdash;pawns can't move diagonally to capture, rooks and xiangqi horses aren't blocked by pieces in the way, etc.</p>
		<p>Even under these conditions, there are actually still a few pieces in the three canonical types of chess mentioned that are not translationally symmetric. One is the pawn in Western chess: on the second row ("rank" in chess terms, but I never remember which is rank and which is file), it can move two spaces forward, but if you translate its position up to the third row it cannot make that move. The others are from xiangqi: the general and advisors can only move within the 3x3 palace, and the elephants cannot cross the river. So, again, we're just going to ignore any pieces with these sorts of location restrictions.</p>
		<p>Out of the remaining pieces, we can split their movements into two types: <strong>leapers</strong> and <strong>riders</strong>. Leapers like simply jump to a square a certain offset away from the starting tile. Knights and kings are leapers <button>King</button>. Riders start like leapers jumping to a square a certain offset away, but then are allowed to continue in that direction (as long as there's nothing in the way, but we're dealing with an empty board, remember) for as long as they like. Rooks and queens are riders <button>Rook</button> <button>Queen</button>. In fact, we can phrase it as "a queen is a king-rider" to denote that a queen has the same basic movement as the king but can continue riding in the same direction as a single move.</p>
		<p>I will again simply state without proof that a leaper and its corresponding rider have the same colorbinding (i.e. they can reach the same set of squares). As an example that's not just "both pieces can reach the entire board," try playing around with an Alfil and an Alfil-rider: <button>Alfil</button> <button>Alfil-rider</button>. Because of this, we can without loss of generality consider only leapers.</p>
		<p>(As an irrelevant aside: you can actually combine leapers and riders, so that you're a rider in some directions and a leaper in others, like the flying dragon and dragon horse in shōgi.) <button>Flying Dragon</button> <button>Dragon Horse</button></p>
		<p>We can describe a leaper as a set of moves that it can make. A knight is a <span class="mathjaxcontent">$\left\{(1,2), (1,-2), (-1,-2), (-1,2), (2,1), (2,-1), (-2,-1), (-2,1)\right\}$ leaper. A white pawn (without its double move or capture moves) is a $\{(0,1)\}$</span> leaper, and a black pawn, which moves the other way, is a $\{(0,-1)\}$</span> leaper.</p>
		<p>On that note: rather than the standard letter-and-number system that chess uses for labeling each square on the chessboard, for our infinite chessboard, I'm labeling them $(x,y)$, like the Cartesian plane. And like the Cartesian plane, the positive x-axis is to the right and the positive y-axis is to the top. Unlike the Cartesian plane, we only have integers, none of the in-between fractions or reals.</p>
		<p>For consistency, let's consider the colorbindings of pieces <em>that start on the origin tile</em>, i.e. tile $(0,0)$.</p>
	</div>

	<div class="content">
		<h2>I Smell Group Theory</h2>
		<p>So where do we begin? As a kid there were a lot of ways I tried to think about this, but group theory was not one of them. Because that's not a thing you learn as a kid. But now that I'm coming back to this question, having had an admittedly extremely fast crash course on the subject, I'm definitely feeling group theory vibes from this question. If we set things up right, maybe we can just nab some ideas from group theory to answer our questoin.</p>
		<p>So let's back up and define some things. A <strong>group</strong> is a set of things and an operation, with a couple properties I'll come back to in a moment. And indeed, here, we have a set of tiles, and each given piece tells you some ways you can move between the tiles, i.e. an operation.</p>
		<p>One of the easiest groups to understand is the additive group of integers, where the set of things is all integers $\mathbb{Z}$ and the operation is addition $+$. The three properties of groups that I promised you are:</p>
		<ol>
			<li>The group must be <strong>closed</strong> under the operation. For all elements $a$ and $b$, $a+b$ must also be part of the group. So, like, if you add $3$ and $8$ you'll get another integer; you'll never get something that's not an integer.</li>
			<li>There must be an <strong>identity</strong> element $e$ such that any element $x+e=x$ and $e+x=x$. For addition, that's zero. If you add zero to any integer, you'll get that same integer back.</li>
			<li>For every element $x$ there must be an <strong>inverse</strong> element $x^{-1}$ such that $x + x^{-1}=e$. For addition, that's the negative of a number. $3$ is an integer, so $-3$ must also be an integer.</li>
			<li>The operation must be <strong>associative</strong>. $(a+b)+c = a+(b+c)$. I will state without proof that this is true for addition.</li>
		</ol>
		<p>So back to chess boards and piece movements. Do these form a group? Well, the way we've numbered the tiles has made it fairly obvious that we're actually just dealing with the cross product of the integers with themselves, $\mathbb{Z} \times \mathbb{Z}$. Note that not only tiles are elements of this&mdash;each movement for a piece, like $(2,1)$ for a knight, is an element of it, too, which is good because we our operation is to put these two things together, a starting tile and a movement, resulting in another tile. And in fact, when we say "put together" what we mean by that is that it's just plain integer addition on each axis separately: if you start from the $(3,5)$ tile and make the $(2,1)$ move, you'll end up on the $(3,5) + (2,1) = (5,6)$ tile. We basically end up inheriting these four properties of groups from the fact that we're just a cross product of two groups (I'll leave the details for a proper group theory class).</p>
		<p>When we think of the board as a group, then what is a colorbinding? Well, since it's the set of a piece's <em>accessible</em> tiles, obviously it's a subset of <em>all</em> tiles, which we just said is $\mathbb{Z} \times \mathbb{Z}$. But there are special kinds of subsets of groups called subgroups - which is exactly what it sounds like, subsets that are themselves groups. So are colorbindings groups?</p>
		<p>Associativity comes for free because that's a property of the operation part of the group, not the set part. So we only have to check the other three properties</p>
		<ol>
			<li>Closure. Remember our definition for this: for all elements $a$ and $b$, $a+b$ must also be part of the group. So consider a tile $a$ that you can reach in some number of moves. If you do that sequence of moves but start from tile $b$ (instead of the origin tile), do you always land on tile that's part of the original group? Well, yes, by our original definition. It's an accessible square because you just accessed it, starting from the origin.</li>
			<li>Identity. The identity for our $+$ operation on $\mathbb{Z} \times \mathbb{Z}$ is the $(0,0)$ origin tile. You start out standing on it, so you've accessed it. Therefore it's in our colorbinding.</li>
			<li>Inverse. That is, if you travel out from the origin to some other square A, you can always find a path all the way back to the origin. But&hellip; that's not actually true. Remember the pawn? You can't undo its moves!</li>
		</ol>
		<p>So in fact, no, a colorbinding of an arbitrary piece isn't a subgroup! We can do two things with this knowledge: (1) restrict our search to symmetric pieces that can always undo any move, or (2) see what we can do even though it's not a group. And in fact, we'll do both, starting with the first.</p>
	</div>

	<div class="content">
		<h2>Symmetric pieces and subgroups</h2>
		<p>Symmetric pieces are pieces whose movements come in pairs: for every move (x,y) that it can make, it can also make the move (-x,-y). As mentioned, all five non-Pawn pieces in Western chess are symmetric. Shōgi, on the other hand, has a lot of asymmetric pieces: the Gold and Silver Generals are wazirs and ferzes respectively, but also can move forward in all three kingly directions. The Shōgi Knight and Chariot, like the Pawn, can only move forward: the Shōgi Knight in the two forwardmost Knight directions, and the Chariot only in the one forward Rook direction (that is, it's a Shōgi Pawn rider). So we're ignoring all of these pieces.</p>
		<p>So let's consider the basic pieces we've seen so far: the Wazir, the Ferz, the Dabbaaba, the Alfil, and the Knight (the Queen is, of course, a King Rider, and in turn a King is just a Wazir plus a Ferz). Out of these, the Knight and Wazir share the same colorbinding despite their movement sets looking completely different. But also, if you look at the different movement sets, they all kind of look similar. Just kind of grid-ish, lines running at right angles to each other. And you can imagine if you take a symmetric piece that can go to (0,3) and (3,0) (and of course, by the rules of symmetric pieces, (0,-3) and (-3,0) as well), you'd still get a similarly stiff 90 degree square grid but with lines 3 apart instead of 2 apart. Is that always the case?</p>
		<p>The most obvious counterexample would be where you jump different amounts on different axes. You could be a Dabbaaba in the vertical direction but a Wazir in the horizontal: {(1,0), (-1,0), (0,2), (0,-2)}. Try it out yourself, and you'll find you end up with a stretched out rectangular grid.</p>
		<p>What about the angles of the gridlines? Do they have to be 90 degrees? Consider the Narrow Knight. It's the Shōgi Knight, but extended to be symmetric: it's {(1,2), (-1,2), (1,-2), (-1,-2)}. Unlike the full Knight, this is colorbound! Try it yourself, and note that you do end up with a grid of sorts, but with both irregular lengths and irregular angles between the lines.</p>
		<p>So do we always get a grid of straight lines at all? Well, other than the Knight, all the pieces we've considered so far have only two distinct moves (and their inverses). So actually maybe this should have been obvious. Like, consider the piece that can move horizontally as a Dabbaaba but forward right/backwards left as a Narrow Knight: {(2,0), (-2,0), (1,2), (-1,-2)}. For any square that you can get to, you got there by moving some number of moves along the Dabbaaba axis and the Narrow Knight axis. For our group, addition is commutative (which isn't true in general, but is true of ordinary addition of Z and therefore also of Z x Z), so we can reorder this as moving along our Dabbaaba axis first some number of times, and then along the Narrow Knight axis. These axes are linearly independent, which is to say they're not along the same direction, so once you start doing Narrow Knight moves, you'll never come back to a square along the Dabbaaba axis (the x-axis) unless you undo all your Narrow Knight moves. This will naturally look like a grid, since you have two directions.</p>
		<p>But what happens if you add a third direction? What does our grid end up looking like? Before we dive into a proof, let's play around with this. If we start from our Dabbaaba-Narrow Knight combo. What happens if we add in the other Narrow Knight move (-1,2) and its inverse? What if we instead add in an Alfil move like (1,1) and its inverse? Or maybe this starting piece was too restrictive to show us everything - try other combinations of three moves (and their inverses).</p>
		<p>You probably ended up only getting these sorts of parallelogram grids. In fact, I can kind of skip to the answer and tell you that you definitely did. But how can we prove so rigorously?</p>
		<p>You know what this feels an awful lot like? Linear algebra, and finding a minimal spanning set.</p>
	</div>
	<hr>
	<h1>Acknowledgments</h1>
	<div class="content">
		<p>This page was created by Viola Buddy for the Summer of Math Exposition 3 (SoME3), an event organized by the YouTube channel 3Blue1Brown (among others) to encourage people to create explanations of math or math-related subjects in any online medium. This page was written in HTML/Javascript, with equations written using the <a href="https://www.mathjax.org/">MathJax</a> library.</p>
	</div>
<script type="text/javascript">
	window.MathJax = {
	  tex: {
	    inlineMath: [['$', '$'], ['\\(', '\\)']]
	  }
	};

	main();
</script>
</div>


</body>
</html>